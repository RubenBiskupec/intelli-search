Li et al. RoObomech J (2020) 7:21
https://doi.org/10.1186/s40648-020-00169-y

© ROBOMECH Journal

RESEARCH ARTICLE Open Access

Gait modification for improving walking

®

Check for
updates

stability of exoskeleton assisted paraplegic

patient

Mengze Li ®, Tadayoshi Aoyama and Yasuhisa Hasegawa

Abstract

The currently available exoskeleton for assisting the paraplegic patient in walking usually adapts a pre-programmed
gait that involves the patient following an exoskeleton lead. The system allows the patient to hold a pair of canes in
order to keep balance, and does not contribute to keeping balance without the patient's action. This paper proposes
an algorithm based on the zero moment point (ZMP) to modify the gait generated through human walking synergy
for paraplegic patients who make use of the exoskeleton system and hold their canes. The proposed ZMP will enable
the paraplegic patient to keep balance during walking and also reduce the burden in maintaining balance. First, a
pair of cane is used as an interface to control the user's walking and then, the synergy between legs and canes is

used to synchronize the user's walking intention during the exoskeleton movement. The walking synergy is extracted
from the able-bodied subject walking with a pair of canes and analyzed using principal component analysis (PCA). In
order to improve the walking stability, the hip joint angle on stance leg during walking was modified based on ZMP.
Furthermore, a nonlinear inverted pendulum (NIP) model was utilized in order to generate a gait with a fully stretched
knee joint angle that is similar to human gait. The proposed method was verified via the Gazebo simulation using a
walking robot to simulate a patient wearing an exoskeleton. The experiment results show that the walking stability

was highly improved after gait modification.

Keywords: Human walking synergy, Lower-limb exoskeleton, Walking stability

Introduction

In recent years, research on the powered exoskeleton has
become a hot topic. The rapid development of the exo-
skeleton has made great achievements in two aspects:
(1) augmentation in human strength and durability.
For example: Berkeley lower extremity exoskeleton is
designed to increase human endurance and strength [1].
Quasi-passive leg utilizes only spring and damper to aug-
ment load-carrying during walking [2]. (2) restoration in
the physical function of a disabled patient. For example:
Roboknee determines user intent through the knee joint
angle and ground reaction forces and allows the wearer
to climb stairs [3]. Re-walk enables spinal cord injured

 

*Correspondence: li@robo.mein.nagoya-u.acjp
Department of Micro-Nano Mechanical Science and Engineering, Nagoya
University, 1 Furo-cho, Chikusa-ku, Nagoya 464-8603, Japan

o) Springer Open

 

patients to walk without human assistance [4]. Neuro-
Rex uses non-invasive electroencephalography to decode
a paraplegic patient motion intent and aid walking [5].
LOPES applied impedance control on joints to allow
bidirectional mechanical interaction between robot and
patient for gait rehabilitation [6].

Among the above-mentioned exoskeletons, exoskele-
tons for assisting the paraplegic patient have been widely
used in scientific research, rehabilitation, and daily life.
A paraplegic patient is a person who has lost the motor
and sensory function of the lower body. The exoskeleton
acts directly on the patient’s body, supporting the user’s
weight and augment the strength as well as provides a
high capability for the paraplegic patient to walk again.
Sankai et al. [7] developed a well-known exoskeleton,
hybrid assistive limb (HAL), to help physically challenged
people to walk again. HAL uses electromyography to

© The Author(s) 2020. This article is licensed under a Creative Commons Attribution 4.0 International License, which permits use, sharing,
adaptation, distribution and reproduction in any medium or format, as long as you give appropriate credit to the original author(s) and
the source, provide a link to the Creative Commons licence, and indicate if changes were made. The images or other third party material

in this article are included in the article’s Creative Commons licence, unless indicated otherwise in a credit line to the material. If material
is not included in the article’s Creative Commons licence and your intended use is not permitted by statutory regulation or exceeds the
permitted use, you will need to obtain permission directly from the copyright holder. To view a copy of this licence, visit http://creativeco

mmons.org/licenses/by/4.0/.
Li et al. RobomechJ (2020) 7:21

estimate the walking intention to support a paraplegic
patient to walk. In [8], HAL detects a preliminary motion
to enhance the transfer between standing and sitting
for complete paraplegic patients. In [9], HAL infers the
spinal cord injury patient’s walking intention using the
ground reaction force for gait support. In [10], HAL esti-
mates the leg swing speed according to the walking veloc-
ity for restoring the gait of spinal cord injury patients.
Besides, Ekso Bionics developed by Ekso measures the
position of the user’s center of gravity and estimates the
walking intention of paraplegic patients by detecting the
center of mass (CoM) transfer when their upper body is
leaned forward [11].

All the above-mentioned exoskeletons adapt a pre-pro-
grammed joint trajectory for walk assistance. The user
holds a pair of canes to keep balance which supports the
exoskeleton’s movements to walk. Although the start and
stop of walking is controlled by the user incline the body,
the user still needs to adjust the angle and fall point of
the canes to cooperate with the gait of the exoskeleton.
The pre-programmed trajectory method is not the only
solution to generate the exoskeleton movement. The
researches about human walking synergy make non-pre-
programmed trajectory generation possible.

Researches on human walking synergy have reported
that human walking does not only involve a repetitive
swing of legs but a highly coupled cooperative motion
between upper and lower limbs. Matthew et al. examined
the synergy between arms and legs in healthy adults by
constraining one arm while walking in a treadmill [12].
Thierry et al. proved that the synergy between arms and
legs exist not only during human walking but also in
creeping and swing activities [13]. Jaclyn et al. studied the
synergy between the arms and legs during cycling move-
ment and stated that “any contributions from the arms is
functionally linked to locomotion” [14]. Volker et al. stud-
ied the synergy between arms and legs by measuring the
electromyographic on leg and arms during walking [15].
Volker also studied the synergy between the arms and
legs of patients suffering from movement disorders [16].
Besides, Principal component analysis (PCA) is often
used to analyze human synergy to extract the coupling
relationship between limbs. Daffertshofer et al. published
a tutorial about how to apply PCA on moment data as
feature extractor and as data-driven filter [17]. Todorov
er al. analyzed the synergies underlying complex hand
manipulation using PCA [18].

The human synergy also greatly contributed to the
design and control of exoskeleton. Crocher et al. pro-
posed a robot control approach that integrates an
explicit model of inter-joint coordination based on a
linear relationship between joint velocities [19, 20]. Liu
developed a rehabilitation exoskeleton based on the

Page 2 of 12

postural synergy that allows the 10 degrees of freedom
robot driven by only two actuators [21]. Hassan pro-
posed an instrumented cane to help hemiplegic patients
walk with the help of an exoskeleton [22—24]. Hemiple-
gic patients are patients who lost the motor and sen-
sory function of half side of the body but another side
remains functional. In their studies, the motion of the
unaffected leg and cane were used to induce the motion
of the affected leg. In our study, the target patient is
paraplegic. Paraplegic patients are patients who lost
the motor and sensory function of the lower body but
the upper body remains functional. We researched the
synergy between canes (arms) and legs and confirmed
that by using the motion of canes will aid to generate
the motion of legs for walking.

This study uses a cane as an interface to control the
walk of a paraplegic patient wearing an exoskeleton. The
walking synergy was extracted from a healthy subject
and applied to synchronize the exoskeleton’s movement
with the user’s intention. To improve the walking stabil-
ity, the hip joint trajectory on the stance leg was modi-
fied using the zero moment point (ZMP). To generate a
human-like gait, a non-linear inverted pendulum (NIP)
model was used to modify the walking trajectory gener-
ated by walking synergy. Therefore, our approach does
not give additional operations to paraplegic patients. The
proposed gait generation and modification method were
validated by simulation using the Gazebo software. The
major contribution in this paper is the gait modification
method based on ZMP to improve the walking stability
of a paraplegic patient wearing an exoskeleton. Using this
system, the exoskeleton also contributes to the balance
control, thus reduce the burden of keeping the balance
of the patient while walking. The minor contribution of
this paper is on the utilization of canes as an interface
to synchronize the user’s intention and leg motion. It is
noteworthy to mention that using the cane as the inter-
face does not increase the burden of the patients as the
purpose is only to keep balance.

This paper is organized as follows: "Gait generation
based on walking synergy" section introduces PCA to
extract the walking synergy between cane and leg motion
from data of subject walking with canes. "Motion plan-
ning using NIP and ZMP" section introduces ZMP and
NIP for motion planning. "Gait modification using NIP
and ZMP" section involves steps on how to combine
the human walking synergy and ZMP based gait modi-
fication. "Simulation and result" section introduces the
walking robot and verifies the proposed gait modification
method in the Gazebo simulation. "Discussion" section
discusses the advantage and possible improvement of the
proposed gait modification method. Finally, the conclud-
ing remarks is presented at the end of the paper.
Li et al. RobomechJ (2020) 7:21

Gait generation based on walking synergy

The detail explanation of using principal component
analysis (PCA) to analyze human walking synergy is
described in [25, 26]. PCA combines the variables to
derive new components and as a result produce a sim-
pler description of the system. The matrix of the prin-
cipal components (eigenvectors in descending order) is
divided and rearranged to calculate the unknown vari-
ables from the known variables.

y=T'xx. (1)

where I is the matrix of the eigenvectors in descending
order concerning the eigenvalues. The original data x is
mapped to the new data y after being multiplied by the
liner transition matrix 7. Since the I is an orthonormal
matrix, then x could be rewritten as:

x=Ty. (2)

then I could be separated for the known variables x; and
the unknown variables x2:

x1 = iy, x2 = Poy. (3)

where I"; and I, are the separated matrix for the known
and unknown variables, respectively. The unknown varia-
bles could be computed from the separated matrixes and
the known variables:

x2 = PoPien. (4)
where rs is the pseudo-inverse of I’:
r= (?rypory. (5)

In the case of a paraplegic patient, the matrix » is the
data of joint angle from a subject walking with a cane, the
known variable matrix x; is the joint angle of the upper
limbs, and the unknown variable matrix x2 is the joint
trajectories of the lower limbs. Instead of applying the
arm joint trajectories, the cane inclination were used as
the known variable matrix x;. In the case of this paper,
the extracted synergy is contained in a 6 by 6 matrix, and
each column corresponds to a principal component (PC).
Each PC has a contribution ratio to the synergy, and we
show the contribution ratio in Table 1. We chose PC1,
PC2, and PC3 as the matrix I’, where the first two rows
are I”; and the last four rows are 19. In this way, the walk-
ing synergy was used as a gait generator, with the cane
inclination angle as input, and the generator generates a
joint angle of hip and knee. Therefore the x; and x2 can
be written as:

Page 3 of 12

0; | r
k h
Os Os

x1 = [0]

x2 = [02

ok (6)
where 6; and 6, are the left and right cane inclination
angles. The 6”, and 6X, are the hip and knee joint angle
of the swing leg, the of, and 0%, are the hip and knee
joint angle of the support leg. The 0, will be replaced to
improve the walking stability, and the method is intro-
duced in following section.

Three subjects participated in this experiment and com-
prise of all-male, healthy, aged from 25 to 30 and without
any history of movement disorder. The gait of the paraplegic
patient wearing the exoskeleton was related to the degree
of injury and the proficiency of exoskeleton used. A trained
paraplegic patient with both unaffected arms can swing
a cane and leg on the opposite side simultaneously during
walking. The utilized gait is the fastest and the most effi-
cient, therefore it becomes the target motion in this research
and is used to extract the walking synergy. To mimic the
walking conditions of the paraplegic patient, the subjects
were asked to support the body with crutches as much as
possible during the walk while moving the cane with the leg
on the opposite side simultaneously during walking.

The body kinematics was recorded using a 3D optical
motion capture system (OptiTrack) at a frequency of 250
Hz. 16 infrared reactive markers were fixed on the lower
body of the subject to record the walking movement and
3 markers on each cane to record the movement of canes.
The 16 infrared reactive markers were fixed according
to the conventional lower limb model, 2 on each foot, 1
on each ankle, 1 on each shank, 1 on each the knee, 1 on
each thigh, and 4 on the waist.

Figure 1 shows the comparison between the joint angle of
the human walk and the joint angle generated using walk-
ing synergy. For the hip joint angle, the mean error and the
maximum errors are 1.51 [deg] and 5.47 [deg], respectively.
In the case of the knee joint angle, the mean error and max-
imum errors are 2.54 [deg] and 15.96 [deg], respectively.
The small discrepancy shows that the generated joint angle
has high similarity with the joint of human walking.

Motion planning using NIP and ZMP

The ZMP is widely used for gait generation in a humanoid
robot. For example, Philippe strictly defined the ZMP in
[27], and Kajita used a preview control of ZMP for biped
gait generation [28]. Linear inverted pendulum (LIP) model
is widely used in the trajectory planning [29, 30]. The LIP
assumes a constant height for the center of mass (CoM)
which results in a bent knee joint on the stance leg during
gait. During the stance phase of the human walking the
Li et al. Robomech J (2020) 7:21 Page 4 of 12

 

Cane inclination angle

12 —— right
— left
10

[Deg]

 

Time [Sec]

Knee joint angle

35 —— Synergy
30
A
Peo !
2,
15
10
° SO —_

0 i => - NT
-5
0 1 2 3 4 5 6 7
Time [Sec]
6 Hip joint angle
—Human
10 \ —— Synergy
5 |
DB
®o
a \
0
5 SN | SQ
-10
0 1 2 3 4 5 6 7
Time [Sec]

 

 

Fig. 1 Comparison between human walking joint trajectory and walking joint angles generated using walking synergy
\ J

stance leg becomes fully extended, which makes the LIP ‘The zero moment point xzjp can be derived from this
model not in accordance with the natural human walking. model:
In the present study we use a nonlinear inverted pendulum
(NIP) to generate the CoM trajectory, subsequently, the
leg joint angle can be obtained by solving the inverse kin-
ematics. For the NIP, the length of the pendulum remains
constant and the generated walking motion has a fully
stretched knee joint on stance leg, which is similar to the
human walking habit.

Figure 2 shows the nonlinear inverted pendulum (NIP)

t= m(g+Zmu)(xm — xzmp) + Mkmzm. (8)

where m is the mass at center, g is the gravitational accel-
eration, T is the total external moment, x,y and zy, are the
CoM position, x, and Z,y is the acceleration in the direc-
tion along the coordinate X and Z. The resultant moment
tT at the zero moment point equals to zero can be written

 

as:

model. The inverted pendulum model has a constant

length r, the CoM is assumed concentrated at the tip of the Sap = zm +8 (ar — xzmp) (9)
pendulum, and the angle between the pendulum and the m mB

vertical direction is 6. The position of the CoM can be writ-

ten as follow: Due to the high degree of nonlinearity, the differential

Eq. (9) is difficult to find an analytical solution. Assume
xm =r sin(@), zm =r cos(@). (7) the Zy is constant, this model becomes a linear inverted
pendulum (LIP), and the solution can be written as:
Li et al. Robomech J (2020) 7:21 Page 5 of 12

 

xm = Cje® + Coe ° + xzmp,

1 (10)
w = t/(zm/g)?.

where zy is a constant. Given the CoM position and
walking cycle, as well as the reference ZMP, then the C;
and C2 can be determined, and the trajectory of CoM can
be written as a function of time. From Eq. (7), we can
obtain the below equation:

x
0 =sin! (=). (11)
r

By substituting the solution (10) into the Eqs. (11) and
(7), we can get the trajectory of 6 and zy. Furthermore,
by differentiating zj, we can get Zjy. From Eq. (9), we can

 

 

 

 

get:
XMZM
XZMP = XM — 3: (12)
ZM +g
Fig. 2 Noni inverted pendul del ge -
eee J) By substituting zy and Zjy into the Eq. (12), we can get
the trajectory of ZMP.

Figure 3 shows an example of CoM trajectory planning
using a nonlinear inverted pendulum model. We calcu-
lated the difference between ZMP and reference ZMP for
PC1(%) = PC2(%) = PC3(%) = PC4(%) = PCS (%) = PC6 (%) ~— different pendulum lengths and step lengths. It was found

5071 3774 78 583 144 001 that this difference is mainly related to the ratio between

Table 1 Ratio of principal components

 

 

 

 

pendulum length = 0.8, step length = 0.4 pendulum length = 0.8, step length = 0.5

  

0 0.5 1 15 2 2.5 3 oi 0.5 1 TS 2 2u5 3
Time [Sec] Time [Sec]

 

E
n=
0 0.5 1 1S 2 25 3 0 0.5 1 aS 2 2.5 3
Time [Sec] Time [Sec]
pendulum length = 0.8, step length = 0.6 pendulum length = 0.8, step length = 0.7

    
 
 

ZMP
Reference ZMP

 

ai 0.5 1 1.5 2 2.5 3 0 0.5 1 1.5 2 205 3
Time [Sec] Time [Sec]

Zy (mI

 

0 0.5 1 1.5 2 28 3 “0 0.5 1 1.5 2 ous 3
Time [Sec] Time [Sec]

 

Fig. 3 Example of ZMP planning using a nonlinear inverted pendulum model
NX SS

 
Li et al. RobomechJ (2020) 7:21

the step length and pendulum length. When the ratio is
less than 0.5, there is almost no difference between ZMP
and reference ZMP. When the ratio is above 0.5, an error
is observed and the error increases with an increase in
the ratio. In this case, it is necessary to judge whether
the error has a significant effect on the stability of walk-
ing (i.e. whether the ZMP still falls within the supporting
polygon). In this paper, the ratio is maintained at 0.5 or
less.

Gait modification using NIP and ZMP

The walking gait generated from the walking synergy
might not result in a fully stable walk due to the dynamic
difference between the lower-limb exoskeleton and a
human subject. Therefore, to make the walking synergy-
based gait fits with the patient wearing the powered
exoskeleton, we modified the walking gait by employing
ZMP.

The walking synergy is used as a gait generator, with
the motion of the cane as input and the walking syn-
ergy generates the joint angle of legs for walking. In the
real case, the IMU sensor can be attached to the cane to
measure its inclination. The NIP model can be used to
generate a stable CoM trajectory, in which the resultant
ZMP stays in the support polygon formed by the cane
and foot. The key point is to use the NIP to generate a
stance leg motion that is in accordance with the swing
leg motion generated by walking synergy. The hip joint
on stance leg is modified to improve the walking stabil-
ity. We considered two points when using the ZMP to
modify the walking motion: (1) The generated walk-
ing motion should have a fully stretched knee joint on

Page 6 of 12

stance leg which fits the human walking habit. (2) There
should be no gap at the joint angle when the swing leg
becomes a stance leg. When a human walks, the knee
joint of stance leg is fully stretched. If the length of the
NIP model equals the length of the leg when it is fully
stretched, the walking motion generated using the NIP
has a fully stretched knee joint on the stance leg. Given
the walking cycle and step length, the hip joint trajectory
of the stance leg can be generated using NIP. In addi-
tion, given the joint angle when the swing leg becomes
the stance leg, the hip joint trajectory can be modified
so that there exists no gap on the joint angle trajectory
when the swing leg becomes the stance leg. The details
can be described below.

Figure 4 shows the relationship between the pendulum
and human walking in gait modification. The origin of
the pendulum is at the contact point between the pen-
dulum and ground while the origin of the human is at
the contact point between the stance leg and ground.
Assuming the step length of walking is /, and the CoM
of the pendulum moves from —//2 to //2, the moment of
the human to start a step and the pendulum to move is
at time ¢;, and the moment of the human to end the step
and when the pendulum stops moving is at time te. By
substituting the above-mentioned values into Eq. (10),
we can get:

—1/2 = Cia, + Cod2 + xzmp,

13
[/2 = Cya3 + Cod4 + xzmp. (13)

where the 4, a2, a3 and a4 are:

 

eee --.
o«J_ fT  &#="e.

Start fromt;,49 “

l<—] /2—>l<—] /2—

 

Fig. 4 Relationship between pendulum and human walking in gait modification
XX

OO

 
 
        
  
    

Start from
hi

——
—_— =
--" ——
~
~

 
Li et al. RobomechJ (2020) 7:21

ay = elem lg)?
ay = obs eMlo?
ay = entelemle)?
aa = oteleu le)?

Therefore, the parameters to determine the solution
function of Eq. (10) can be obtained as follow:

ay1/2+ agl/2

a\a4 — 4743

ayl/2+ a3l/2 (15)
Cy =

a1a44 — 4243

Using Eq. (11), we can convert the solution of Eq. (10)
into an inclination angle of the pendulum 6. As shown in
figure 4, assuming the hip joint angle on stance leg when
a step is taken is 6;, the inclination angle of the pendulum
when it starts to move is 6, the modified hip joint angle
trajectory of stance 0* can be obtained by:

0* = 6 — (0 — 4). (16)
where 0* is used to replace the hip joint angle of support
leg, 6", which is mentioned in "Gait generation based on
walkingsynergy" section .

Different from a fully programmed walking system, the
time consumed and step length of each step are unknown
in advance, and they may vary in each step. To use the
ZMP to modify the hip joint trajectory on stance leg, the
time consumed and the step length needs to be predicted
in advance for each step.

Since walking is a highly coupled cooperative motion
between upper and lower limbs, the walking cycle and
step length can be related to the motion of cane. When
the patient walks using a trot-like gait, the opposite leg
and the cane starts and lands almost at the same time,
and the relative distance between them is almost con-
stant. In our method, the walking cycle and step length
are predicted in each step using the angle change of the
cane when the cane commenced moving. Walking cycle
usually refers to the time consumed during walking and
includes one left step and one right step. After prediction
at the beginning of each step, half of the walking cycle
was used as the time consumed to generate the walking
motion using ZMP.

Figure 5 shows the relationship between the walking
cycle and angular change of cane in 0.08 [s] as well as
between step length and angular change of cane in 0.08
[s]. This Figure includes the data of 50 steps of three sub-
jects walking with a cane. The x-axis is the angle change
of the cane in 0.08 [s] after it starts to swing whereas the

 

 

 

 

 

 

 

Page 7 of 12
( >
Relation between cane and step length
1.2
1 *
*
— 0.8
£
£
D) 0.6
Cc
&
oO
® 04
”
0.2
*
0 | 1 1 |
0.5 1 1.5 2 2.5 3 3.5
Change of cane angle [Deg]
Relation betwen cane and walking cycle
4 *
3.8
3.6
| 3.4
®O
30
&
Q 3
Oo
D) 2.8
=
=<
g 2.6
2.4
*
2.2
* *
2 | 1 1 |
0.5 1 1.5 2 2.5 3 3.5
Change of cane angle [Deg]
Fig. 5 Walking cycle and step length pridiction
Ne

 

y-axis refers to the walking cycle and step length, respec-
tively. The equation to predict the walking cycle and step
length are obtained from this Figure and can be written
as:

T =0.567A cane + 2.228. (17)

S =0.283A cane — 0.081. (18)

where T is the walking cycle and S is the step length, and
Acane is the angle change of the cane in 0.08|[s] after it
started to swing.

During walking, deviations between predictions and
actual conditions may occur. The error of walking cycle
prediction will cause the foot and the cane to land at dif-
ferent time. If the error is small, the stability of walking
Li et al. RobomechJ (2020) 7:21

 

 

 

 

 

 

 

 

 

 

 

 

 

 

   

o——-ank le joint

 

 

Fig.6 Walking robot replacing a patient for preliminary study
Ne

Table 2 Parameters of walking robot

 

 

Parameter/Part Thigh Lower Foot Body Crutch
Mass [kg] 1.742 1.774 0.592 12.48 2.24
Length [cm] 33.3 32.75 20 73 134

 

becomes unaffected. However, the error of step length
prediction accumulates as the walking distance increases
and needs to be corrected via compensation. To avoid
the accumulation of errors, the error of the last step was
compensated at the previous steps:

Sk = Sk +Ex-1 (19)

where Sj, is the step length updated in the current step,
Sx is the step length predicted in the current step, Ex —1 is
the error measured in the last step.

Simulation and result

It is dangerous to conduct experiments with a paraplegic
patient before validating the feasibility of the proposed
method. Furthermore, an able-bodied subject cannot
wear an exoskeleton to replace the patient used for vali-
dating experiments. Although able-bodied subjects can
consciously imitate paraplegic patients and can subcon-
sciously put force into their lower limbs to keep their bal-
ance when the risk of falling is high. Therefore, a walking
robot was built to simulate a paraplegic patient wearing
an exoskeleton to conduct a preliminary study for safety
reasons.

Figure 6 shows the schematic illustrations of the walk-
ing robot. The inertia and link lengths of the lower body
are shown in Table 2. The robot height is 180 [cm] while
the width is 70 [cm]. The weight of the walking robot is

Page 8 of 12

25 [kg] with 16 degrees of freedom. The movable joints
are the shoulder joints, hip joints, knee joints, and ankle
joints. Each leg has six degrees of freedom, the hip has
three degrees of freedom, the knee has one degree of
freedom, the ankle has two degrees of freedom. The
shoulder has one degree of freedom, and the crutches
can be stretched and shortened meanwhile the robot can
adjust its center of gravity to maintain balance. Each joint
of the robot is equipped with an encoder that measures
the joint angle during the experiments. To measure the
ZMP during walking, a six-axis F/T sensor was installed
at the ankle joint.

We performed a robot walking experiment during
the simulation to verify the feasibility of the proposed
method. The walking was divided into the walking phase
and stance phase. The walking phase is a single-support
phase while the stance leg supports the body weight and
swing leg in the air for step taking. The transfer of the
CoM happens at the walking phase and the stance legs
aid the CoM to move forward. The stance phase is a dou-
ble-support phase and both legs support the body weight.
This is a transitional phase, in which the robot remains
still and does not transfer its CoM. In the simulation, the
stance phase takes 1 [sec] and the time consumed at the
walking phase is related to the cane motion and its walk-
ing cycle.

We compared the robot walking with and without gait
modification. In the case of robot walking without gait
modification, the motion of the cane was extracted from
a subject walking with a cane, and the gait was gener-
ated by human walking synergy using the cane motion as
input. In the case of the robot walking with gait modi-
fication (modified using ZMP), the motion of the cane
was extracted from a subject walking with a cane, the gait
was generated by human walking synergy using the cane
motion as input and was modified using ZMP.

Figure 7 shows the simulation scene of robot walking
with gait modification. The upper image in Fig. 7 is the
front view of the robot walking and the lower image in
Fig. 7 is the side view of the robot walking. In a real case
scenario, the exoskeleton is an under-actuated system, it
has degrees of freedom in the sagittal and lateral plane,
but it only provides support in the sagittal plane. In the
simulation, the balance in the lateral plane was kept by
the cane.

Figure 8 shows the ZMP measurement results of
the walking experiment. The upper image in Fig. 8
is the ZMP of robot walking with gait modification.
The lower image in Fig. 8 is the ZMP of robot walking
without gait modification. In the case of robot walking
with gait modification, the maximum error between
ZMP and reference ZMP was 0.204 [m] with an aver-
age error of 0.028 [m]. Errors mostly occur when the
Li et al. Robomech J (2020) 7:21

Page 9 of 12

 

 

 

 

Zero moment point (With gait modification)

ZMP [m]

 

0 2 4 6 8

12 14 16 18 20

Time [Sec]
Zero moment point (Without gait modification)

ZMP [m]

 

0 2 4 6 8

Time [Sec]

Fig. 8 Comparison between robot walking with and without gait modification

robot takes a step and the ZMP gradually converges
to the reference ZMP. This is mainly due to the robot
change from stationary to motion, and the mainte-
nance of balance is changed from 4-point to 2-point
support. Although there is a difference between the
ZMP and the reference ZMP, the ZMP always stays in

 

the support polygon while preventing the robot from
falling. In the case of walking without gait modifica-
tion, the maximum error between ZMP and reference
ZMP was 0.434 [m] with an average error of 0.050
[m]. Errors mostly occur when the robot takes a step
with no convergence of ZMP to the reference ZMP,
Li et al. RobomechJ (2020) 7:21

Page 10 of 12

 

6 | | | |
0 0.1 0.2 0.3 0.4

0 0.1 0.2 0.3 0.4

[Deg]

-10 | | | |
0 0.1 0.2 0.3 0.4

 

leading the robot to fall within six steps. It can be seen
from these experimental results that gait modification
greatly improved the walking stability.

Figure 9 shows the hip and knee joint angles dur-
ing one walking cycle. From top to bottom is the
inclination angle of the cane, the knee joint angle,
and the hip joint angle. The blue line represents the
joint trajectory extracted from human walking with
a cane. The red line represents the joint trajectory
generated by human walking synergy. The yellow line
represents the joint trajectory generated by human
walking synergy and modified using ZMP. Either the
joint trajectory generated by human walking synergy
or the joint trajectory modified using ZMP was close
to the joint trajectory extracted from human walking
with a cane.

Cane inclination angle

Normalized walking cycle

Knee joint angle comparison

    

Normalized walking cycle

Hip joint angle comparison

Fig. 9 Comparison of human gait, gait generated suing synergy and modified gait
XX

—Human

 

| | | | | |
0.5 0.6 0.7 0.8 0.9 1

— Human
— Synergy

 

0.5 0.6 0.7 0.8 0.9 1

 
 
   

—Human
— Synergy
——Modified

 

| | | | | |
0.5 0.6 0.7 0.8 0.9 1

Normalized walking cycle

 

Discussion

There are three important points for assistive control of
lower-limb exoskeleton to assist a paraplegic patient dur-
ing walking: (1) synchronization of exoskeleton’s motion
and user walking intention, (2) human-like gait genera-
tion and (3) walking stability.

The use of human walking synergy to generate gait
can solve the problems of synchronization between user
intention and exoskeleton motion as well as human-like
gait. Firstly, the leg motion generated by human walking
synergy was completely synchronized with the motion of
the cane. The motion of the cane was coupled with the
motion of lower limbs, and it is controlled by the user
and therefore reacts with the intention of the user. Sec-
ondly, the leg motion generated by human walking syn-
ergy is similar to the human walking motion. The walking
motion generated in this way is natural and compatible.
Li et al. RobomechJ (2020) 7:21

The use of ZMP to modify the walking motion solves
the stability problem. Firstly, the walking trajectory gen-
erated using ZMP becomes stable. Theoretically, The
ZMP stays inside the support polygon thereby enabling
the exoskeleton to keep stable during walking. Secondly,
the robot is also involved in maintaining balance. In this
case, the patients no longer rely solely on canes to main-
tain balance, as a consequence reduce the burden on
patients.

The use of NIP ensures that the modified walking tra-
jectory is similar to the human walking trajectory. For
rapid generation and easy calculation, a combination of
a linear inverted pendulum (LIP) and ZMP is often used
to generate the walking trajectory in robot gait planning.
However, the walking motion generated using LIP has a
constant height of CoM, which is inconsistent with the
walking characteristics of humans. The use of NIP makes
up for this shortcoming, thereby enables the modified
trajectory to conform to human walking habits.

The traditional lower extremity exoskeleton uses a pre-
planned walking trajectory. Its walking can be controlled
in terms of when to start and stop, and the walking speed.
The walking with pre-planned trajectory is continuous.
However in our method, it is necessary to predict the
landing point and walking cycle of each step before lifting
the foot, the walking action generated by the proposed
method in is step-by-step. This step-by-step walking may
make paraplegic patient feel safe to use the exoskeleton
at the early stage of rehabilitation, but for patients who
are familiar with the exoskeleton, walking might feel
unnatural. Therefore, the continuity of walking should
be improved to better conform to the walking habits
of human. In addition, the ability to control the robot
through human motion synergy still needs to be investi-
gated with real exoskeleton and patient.

Conclusion

This paper proposes an algorithm via the modifica-
tion of gait generated based on walking synergy to esti-
mate motion intention and control powered lower-limb
exoskeleton. This proposed system treats the cane as an
interface between the user and the exoskeleton. The cane
motion was used to generate the walking motion using
walking synergy. The walking synergy was extracted from
the movement trajectory of a healthy subject walking
with a pair of canes. This synergy synchronizes the walk-
ing motion and the intention of user. The zero moment
point (ZMP) was used to modify the walking motion to
enhance the walking stability. To enable the modified
walking motion in imitating the human walking habits,
the nonlinear inverted pendulum model for trajectory
planning was applied. Instead of a real patient wearing
an exoskeleton, a cane robot was used for the Gazebo

Page 11 of 12

simulation. The experimental result shows that the gait
modification significantly improved the walking stabil-
ity, and the use of nonlinear inverted pendulum model
resulted to a joint trajectory that is similar to the joint
trajectory of human walking.

Authors’ contributions

ML performed the experiments, analyzed the data and wrote the manuscript.
TA and YH guided the research and experiments, and reviewed this manu-
script. All authors read and approved the final manuscript.

Funding
This work was supported by JSPS KAKENHI 17H03205.

Availability of data and materials
Not applicable.

Competing interests
The authors declare that they have no competing interests.

Received: 24 January 2020 Accepted: 24 April 2020
Published online: 30 April 2020

References

1. Zoss AB, Kazerooni H, Chu A (2006) Biomechanical design of the berkeley
lower extremity exoskeleton (bleex). IEEE/ASME Transact Mechatron
11(2):128-138

2. Walsh CJ, Endo K, Herr H (2007) A quasi-passive leg exoskeleton for load-
carrying augmentation. Int J Hum Robotics 4(03):487—506

3. Pratt JE, Krupp BT, Morse CJ, Collins SH (2004) The roboknee: an exoskele-
ton for enhancing strength and endurance during walking. Proceeding of
IEEE International Conference on Robotics and Automation 3:2430-2435

4. Esquenazi A, Talaty M, Packel A, Saulino M (2012) The rewalk pow-
ered exoskeleton to restore ambulatory function to individuals with
thoracic-level motor-complete spinal cord injury. Am J Phys Med Rehabil
91(11):911-921

5.  Kilicarslan A, Prasad S, Grossman RG, Contreras-Vidal JL (2013) High
accuracy decoding of user intentions using eeg to control a lower-body
exoskeleton. In: Proceeding of IEEE International Conference on Engi-
neering in Medicine and Biology Society, p 5606-5609

6. Veneman JF, Kruidhof R, Hekman EE, Ekkelenkamp R, Van Asseldonk EH,
Van Der Kooij H (2007) Design and evaluation of the lopes exoskeleton
robot for interactive gait rehabilitation. IEEE Transact Neural Syst Rehabil
Eng 15(3):379-386

7. Tsukahara A, Kawanishi R, Hasegawa Y, Sankai Y (2010) Sit-to-stand and
stand-to-sit transfer support for complete paraplegic patients with robot
suit hal. Advanced robotics 24(11):1615-1638

8. Tsukahara A, Hasegawa Y, Sankai Y (2011) Gait support for complete spi-
nal cord injury patient by synchronized leg-swing with hal. In: Proceeding
of IEEE International Conference on Intelligent Robots and Systems, p
1737-1742

9. Tsukahara A, Hasegawa Y, Eguchi K, Sankai Y (2015) Restoration of gait for
spinal cord injury patients using hal with intention estimator for prefer-
able swing speed. IEEE Transact Neural Syst Rehabil Eng 23(2):308-318

10. Suzuki K, Mito G, Kawamoto H, Hasegawa Y, Sankai Y (2007) Intention-
based walking support for paraplegia patients with robot suit hal. Adv
Robotics 21(12):1441-1469

11. Strickland E (2012) Good-bye, wheelchair. IEEE Spectr 49(1):30-2

12. Ford MP, Wagenaar RC, Newell KM (2007) Arm constraint and walking in
healthy adults. Gait Posture 26(1):135-141

13. Wannier T, Bastiaanse C, Colombo G, Dietz V (2001) Arm to leg coordina-
tion in humans during walking, creeping and swimming activities. Exp
Brain Res 141(3):375-379

14. Balter JE, Zehr EP (2007) Neural coupling between the arms and legs
during rhythmic locomotor-like cycling movement. J Neurophysiol
97(2):1809-1818
Li et al. RobomechJ

20.

21.

22.

23.

24.

(2020) 7:21

. Dietz V, Fouad K, Bastiaanse C (2001) Neuronal coordination of arm

and leg movements during human locomotion. Eur J Neurosci
14(11):1906-1914

Dietz V (2011) Quadrupedal coordination of bipedal gait: implications for
movement disorders. J Neurol 258(8):1406

Daffertshofer A, Lamoth CJ, Meijer OG, Beek PJ (2004) Pca in studying
coordination and variability: a tutorial. Clin Biomech 19(4):415-428
Todorov E, Ghahramani Z (2004) Analysis of the synergies underlying
complex hand manipulation. In: The 26th Annual International Confer-
ence of the IEEE Engineering in Medicine and Biology Society, IEEE. 2: p
4637-4640

Crocher V, Sahbani A, Robertson J, Roby-Brami A, Morel G (2012) Con-
straining upper limb synergies of hemiparetic patients using a robotic
exoskeleton in the perspective of neuro-rehabilitation. IEEE Transact
Neural Syst Rehabil Eng 20(3):247-257

Crocher V, Jarrassé N, Sahbani A, Roby-Brami A, Morel G (2011) Changing
human upper-limb synergies with an exoskeleton using viscous fields. In:
2011 IEEE International Conference on Robotics and Automation, IEEE. p
4657-4663

Liu K, Xiong C (2013) A novel 10-dof exoskeleton rehabilitation robot
based on the postural synergies of upper extremity movements. In: Inter-
national Conference on Intelligent Robotics and Applications, Springer. p
363-372

Hassan M, Kadone H, Suzuki K, Sankai Y (2012) Exoskeleton robot control
based on cane and body joint synergies. In: Proceeding of IEEE Interna-
tional Conference on Intelligent Robots and Systems, p 1609-1614
Hassan M, Kadone H, Suzuki K, Sankai Y (2014) Wearable gait measure-
ment system with an instrumented cane for exoskeleton control. Sensors
14(1):1 705-1722

Hassan M, Kadone H, Ueno T, Suzuki K, Sankai Y (2015) Feasibility study
of wearable robot control based on upper and lower limbs synergies. In:

25.

26.

2/.

28.

29.

30.

Page 12 of 12

Proceeding of International Symposium on Micro-NanoMechatronics
and Human Science, p 1-6

Vallery H, Van Asseldonk EH, Buss M, Van Der Kooij H (2008) Reference tra-
jectory generation for rehabilitation robots: complementary limb motion
estimation. IEEE Transact Neural Syst Rehabil Eng 17(1):23-30

Vallery H, Buss M (2006) Complementary limb motion estimation based
on interjoint coordination using principal components analysis. In: Pro-
ceeding of IEEE Conference on computer aided control system design,
Proceeding of IEEE International Conference on Control Applications,
Proceeding of IEEE International Symposium on Intelligent Control, p
933-938

Sardain P, Bessonnet G (2004) Forces acting on a biped robot center of
pressure-zero moment point. IEEE Transact Syst Man Cybern-Part A: Syst
Hum. 34(5):630-637

Kajita S, Kanehiro F, Kaneko K, Fujiwara K, Harada K, Yokoi K Hirukawa:
Biped walking pattern generation by using preview control of zero-
moment point

Park JH, Kim KD (1998) Biped robot walking using gravity-compensated
inverted pendulum mode and computed torque control. Proceedings of
IEEE International Conference on Robotics and Automation 4:3528-3533
Sugihara T, Nakamura Y, Inoue H (2002) Real-time humanoid motion
generation through zmp manipulation based on inverted pendulum
control. Proceedings of IEEE International Conference on Robotics and
Automation 2:1404—1409

Publisher’s Note
Springer Nature remains neutral with regard to jurisdictional claims in pub-
lished maps and institutional affiliations.

 

 

 

 

S
Submit your manuscript to a SpringerOpen”®
journal and benefit from:
> Convenient online submission
> Rigorous peer review
> Open access: articles freely available online
> High visibility within the field
> Retaining the copyright to your article
Submit your next manuscript at > springeropen.com
SS

 

 
